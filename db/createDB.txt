CREATE DATABASE diseaseDiag
DEFAULT CHARACTER SET utf8
DEFAULT COLLATE utf8_general_ci;

USE diseaseDiag;

CREATE TABLE IF NOT EXISTS `question` (
`qID` int(5) ZEROFILL NOT NULL AUTO_INCREMENT,
`question` text NOT NULL,
CONSTRAINT question_PK PRIMARY KEY (`qID`)
);

CREATE TABLE IF NOT EXISTS `answer` (
`ansID` int(5) ZEROFILL NOT NULL AUTO_INCREMENT,
`answer` text NOT NULL,
CONSTRAINT answer_PK PRIMARY KEY (`ansID`)
);

CREATE TABLE IF NOT EXISTS `bodyPart` (
`partID` int(5) ZEROFILL NOT NULL AUTO_INCREMENT,
`partName` text NOT NULL,
CONSTRAINT bodyPart_PK PRIMARY KEY (`partID`)
);

CREATE TABLE IF NOT EXISTS `listQuestion` (
`partID` int(5) ZEROFILL NOT NULL,
`qID` int(5) ZEROFILL NOT NULL,
CONSTRAINT listQuestion_PK PRIMARY KEY (`partID`,`qID`),
CONSTRAINT listQuestion_FK1 FOREIGN KEY (partID) REFERENCES bodyPart (partID) ON UPDATE CASCADE ON DELETE CASCADE ,
CONSTRAINT listQuestion_FK2 FOREIGN KEY (qID) REFERENCES question (qID) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS `listQA` (
`qID` int(5) ZEROFILL NOT NULL,
`ansID` int(5) ZEROFILL NOT NULL,
CONSTRAINT listQA_PK PRIMARY KEY (`qID`,`ansID`),
CONSTRAINT listQA_FK1 FOREIGN KEY (qID) REFERENCES question (qID) ON UPDATE CASCADE ON DELETE CASCADE ,
CONSTRAINT listQA_FK2 FOREIGN KEY (ansID) REFERENCES answer (ansID) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS `disease` (
`disID` int(5) ZEROFILL NOT NULL AUTO_INCREMENT,
`disName` text NOT NULL,
`disDesc` text NOT NULL,
CONSTRAINT disease_PK PRIMARY KEY (`disID`)
);

CREATE TABLE IF NOT EXISTS `cure` (
`cureID` int(5) ZEROFILL NOT NULL AUTO_INCREMENT,
`cureDesc` text NOT NULL,
CONSTRAINT cure_PK PRIMARY KEY (`cureID`)
);

CREATE TABLE IF NOT EXISTS `listCure` (
`disID` int(5) ZEROFILL NOT NULL,
`cureID` int(5) ZEROFILL NOT NULL,
CONSTRAINT listCure_PK PRIMARY KEY (`disID`,`cureID`),
CONSTRAINT listCure_FK1 FOREIGN KEY (disID) REFERENCES disease (disID) ON UPDATE CASCADE ON DELETE CASCADE ,
CONSTRAINT listCure_FK2 FOREIGN KEY (cureID) REFERENCES cure (cureID) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS `listDis` (
`disID` int(5) ZEROFILL NOT NULL,
`qID` int(5) ZEROFILL NOT NULL,
`ansID` int(5) ZEROFILL NOT NULL,
CONSTRAINT listDis_PK PRIMARY KEY (`disID`,`qID`,`ansID`),
CONSTRAINT listDis_FK1 FOREIGN KEY (disID) REFERENCES disease (disID) ON UPDATE CASCADE ON DELETE CASCADE ,
CONSTRAINT listDis_FK2 FOREIGN KEY (qID) REFERENCES question (qID) ON UPDATE CASCADE ON DELETE CASCADE ,
CONSTRAINT listDis_FK3 FOREIGN KEY (ansID) REFERENCES answer (ansID) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS `session` (
`sesID` int(5) ZEROFILL NOT NULL AUTO_INCREMENT,
`sesTime` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
CONSTRAINT disease_PK PRIMARY KEY (`sesID`)
);

CREATE TABLE IF NOT EXISTS `listSes` (
`sesID` int(5) ZEROFILL NOT NULL,
`qID` int(5) ZEROFILL NOT NULL,
`ansID` int(5) ZEROFILL NOT NULL,
CONSTRAINT listSes_PK PRIMARY KEY (`sesID`,`qID`,`ansID`),
CONSTRAINT listSes_FK1 FOREIGN KEY (sesID) REFERENCES session (sesID) ON UPDATE CASCADE ON DELETE CASCADE ,
CONSTRAINT listSes_FK2 FOREIGN KEY (qID) REFERENCES question (qID) ON UPDATE CASCADE ON DELETE CASCADE ,
CONSTRAINT listSes_FK3 FOREIGN KEY (ansID) REFERENCES answer (ansID) ON UPDATE CASCADE ON DELETE CASCADE
);

ALTER TABLE question AUTO_INCREMENT=00001;
ALTER TABLE answer AUTO_INCREMENT=10001;
ALTER TABLE bodyPart AUTO_INCREMENT=20001;
ALTER TABLE disease AUTO_INCREMENT=30001;
ALTER TABLE cure AUTO_INCREMENT=40001;
ALTER TABLE session AUTO_INCREMENT=50001;
